<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Художники и временная шкала</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
    <div class="left">
        <div class="timeline" data-start-year="1250" data-end-year="1950">
            <div class="year-marker" style="left: 0;">1250</div>
            <div class="year-marker">1260</div>
            <div class="year-marker">1270</div>
            <div class="year-marker">1280</div>
            <div class="year-marker">1290</div>
            <div class="year-marker">1300</div>
            <div class="year-marker">1310</div>
            <div class="year-marker">1320</div>
            <div class="year-marker">1330</div>
            <div class="year-marker">1340</div>
            <div class="year-marker">1350</div>
            <div class="year-marker">1360</div>
            <div class="year-marker">1370</div>
            <div class="year-marker">1380</div>
            <div class="year-marker">1390</div>
            <div class="year-marker">1400</div>
            <div class="year-marker">1410</div>
            <div class="year-marker">1420</div>
            <div class="year-marker">1430</div>
            <div class="year-marker">1440</div>
            <div class="year-marker">1450</div>
            <div class="year-marker">1460</div>
            <div class="year-marker">1470</div>
            <div class="year-marker">1480</div>
            <div class="year-marker">1490</div>
            <div class="year-marker">1500</div>
            <div class="year-marker">1510</div>
            <div class="year-marker">1520</div>
            <div class="year-marker">1530</div>
            <div class="year-marker">1540</div>
            <div class="year-marker">1550</div>
            <div class="year-marker">1560</div>
            <div class="year-marker">1570</div>
            <div class="year-marker">1580</div>
            <div class="year-marker">1590</div>
            <div class="year-marker">1600</div>
            <div class="year-marker">1610</div>
            <div class="year-marker">1620</div>
            <div class="year-marker">1630</div>
            <div class="year-marker">1640</div>
            <div class="year-marker">1650</div>
            <div class="year-marker">1660</div>
            <div class="year-marker">1670</div>
            <div class="year-marker">1680</div>
            <div class="year-marker">1690</div>
            <div class="year-marker">1700</div>
            <div class="year-marker">1710</div>
            <div class="year-marker">1720</div>
            <div class="year-marker">1730</div>
            <div class="year-marker">1740</div>
            <div class="year-marker">1750</div>
            <div class="year-marker">1760</div>
            <div class="year-marker">1770</div>
            <div class="year-marker">1780</div>
            <div class="year-marker">1790</div>
            <div class="year-marker">1800</div>
            <div class="year-marker">1810</div>
            <div class="year-marker">1820</div>
            <div class="year-marker">1830</div>
            <div class="year-marker">1840</div>
            <div class="year-marker">1850</div>
            <div class="year-marker">1860</div>
            <div class="year-marker">1870</div>
            <div class="year-marker">1880</div>
            <div class="year-marker">1890</div>
            <div class="year-marker">1900</div>
            <div class="year-marker">1910</div>
            <div class="year-marker">1920</div>
            <div class="year-marker">1930</div>
            <div class="year-marker">1940</div>
            <div class="year-marker" style="left: calc(100% - 40px);">1950</div>
        </div>

        <div id="artists-container">
            </div>
    </div>

    <div class="right">
        <img id="target-image" src="" alt="Выбранное изображение">
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const artistsContainer = document.getElementById('artists-container');
        const timeline = document.querySelector('.timeline');
        const startYear = parseInt(timeline.dataset.startYear);
        const endYear = parseInt(timeline.dataset.endYear);
        const totalYears = endYear - startYear;
        const timelineWidth = timeline.getBoundingClientRect().width;
        const pixelsPerYear = timelineWidth / totalYears;

        // Функция для динамической генерации HTML
        function createArtistElement(artist) {
            const details = document.createElement('details');
            details.classList.add('artist-details');

            const summary = document.createElement('summary');
            summary.classList.add('artist');
            summary.innerHTML = `${artist.name} <i>(${artist.years})</i>`;

            const artsDiv = document.createElement('div');
            artsDiv.classList.add('arts');

            const description = document.createElement('p');
            description.textContent = artist.description;
            artsDiv.appendChild(description);

            artist.artworks.forEach(art => {
                const button = document.createElement('button');
                button.classList.add('art');
                button.textContent = `«${art.title}» ${art.date}`;
                button.onclick = () => showImage(art.image);
                artsDiv.appendChild(button);
            });

            details.appendChild(summary);
            details.appendChild(artsDiv);

            return details;
        }

        // Функция для отображения изображения
        function showImage(imageSrc) {
            const targetImage = document.getElementById('target-image');
            targetImage.src = imageSrc;
            targetImage.style.display = 'block';
        }

        // Загрузка данных из JSON-файла
        fetch('artists.json')
            .then(response => response.json())
            .then(data => {
                data.forEach(artistData => {
                    const artistElement = createArtistElement(artistData);
                    const lifeSpan = artistData.death - artistData.birth;
                    const birthOffset = (artistData.birth - startYear) * pixelsPerYear;

                    // Увеличиваем ширину в 10 раз относительно срока жизни
                    const widthInPixels = lifeSpan * 10;

                    artistElement.style.marginLeft = `${birthOffset}px`;
                    artistElement.style.width = `${widthInPixels}px`;
                    artistsContainer.appendChild(artistElement);
                });
            })
            .catch(error => console.error('Ошибка при загрузке данных:', error));
    });

</script>

</body>
</html>
